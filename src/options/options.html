<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GitLab Notifier - –ù–∞—Å—Ç—Ä–æ–π–∫–∏</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>
    </div>

    <div class="content">
      <!-- GitLab Settings -->
      <div class="section">
        <h2 class="section-title">ü¶ä –ù–∞—Å—Ç—Ä–æ–π–∫–∏ GitLab</h2>
        
        <div class="form-group">
          <label for="gitlabUrl" class="form-label">URL –≤–∞—à–µ–≥–æ GitLab</label>
          <input
            type="text"
            id="gitlabUrl"
            class="form-input"
            placeholder="https://gitlab.example.com"
          />
          <p class="form-hint">–£–∫–∞–∂–∏—Ç–µ –ø–æ–ª–Ω—ã–π URL –≤–∞—à–µ–≥–æ self-hosted GitLab</p>
        </div>

        <div class="form-group">
          <label for="gitlabToken" class="form-label">Personal Access Token</label>
          <div class="input-with-button">
            <input
              type="password"
              id="gitlabToken"
              class="form-input input-with-icon"
              placeholder="glpat-xxxxxxxxxxxxxxxxxxxx"
            />
            <button 
              type="button" 
              id="toggleGitlabToken"
              class="toggle-password" 
              title="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å —Ç–æ–∫–µ–Ω"
            >
              üîí
            </button>
          </div>
          <p class="form-hint">
            –°–æ–∑–¥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω –≤ GitLab: <code>Settings ‚Üí Access Tokens ‚Üí Personal Access Tokens</code><br>
            –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞: <code>read_api</code> (–¥–ª—è MR) –∏–ª–∏ <code>api</code> (–¥–ª—è MR + –ø–∞–π–ø–ª–∞–π–Ω—ã)
          </p>
        </div>

        <div class="button-group">
          <button id="testGitlabBtn" class="button button-secondary">
            üß™ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
          </button>
          <button id="loadProjectsBtn" class="button button-secondary" disabled style="opacity: 0.5;" title="–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ">
            üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–µ–∫—Ç—ã
          </button>
        </div>
        <p class="form-hint">
          üí° <strong>–í–∞–∂–Ω–æ:</strong> –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
        </p>

      </div>

      <div class="divider"></div>

      <!-- Projects Selection -->
      <div class="section">
        <h2 class="section-title">üìÇ –ü—Ä–æ–µ–∫—Ç—ã –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è</h2>
        
        <div class="form-group hidden" id="projectsSearchContainer">
          <input 
            type="text" 
            id="projectsSearch" 
            class="form-input" 
            placeholder="üîç –ü–æ–∏—Å–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤..."
          />
        </div>

        <div class="projects-stats hidden" id="projectsStats">
          <span>–í—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–æ–≤: <strong id="totalProjects">0</strong></span>
          <span>–í—ã–±—Ä–∞–Ω–æ: <strong id="selectedProjects">0</strong></span>
          <div class="auto-select-container">
            <button id="autoSelectMyProjectsBtn" class="button button-secondary button-compact">
              ‚ú® –ê–≤—Ç–æ–≤—ã–±–æ—Ä –º–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
            </button>
          </div>
        </div>

        <div id="projectsList" class="projects-list">
          <div class="loading-projects">
            –ù–∞–∂–º–∏—Ç–µ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–µ–∫—Ç—ã" –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ GitLab
          </div>
        </div>
      </div>

      <div class="divider"></div>

      <!-- Telegram Settings -->
      <div class="section">
        <h2 class="section-title">üì± –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram</h2>
        
        <div class="form-group">
          <label for="telegramBotToken" class="form-label">Bot Token</label>
          <div class="input-with-button">
            <input
              type="password"
              id="telegramBotToken"
              class="form-input input-with-icon"
              placeholder="1234567890:ABCdefGHIjklMNOpqrsTUVwxyz"
            />
            <button 
              type="button" 
              id="toggleTelegramBotToken"
              class="toggle-password" 
              title="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å —Ç–æ–∫–µ–Ω"
            >
              üîí
            </button>
          </div>
          <p class="form-hint">
            –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ <a href="https://t.me/BotFather" target="_blank">@BotFather</a> –≤ Telegram<br>
            –ö–æ–º–∞–Ω–¥–∞: <code>/newbot</code>
          </p>
        </div>

        <div class="form-group">
          <label for="telegramChatId" class="form-label">Chat ID</label>
          <input 
            type="text" 
            id="telegramChatId" 
            class="form-input" 
            placeholder="123456789 –∏–ª–∏ @channel_name"
          />
          <p class="form-hint">
            –£–∑–Ω–∞–π—Ç–µ —Å–≤–æ–π Chat ID —á–µ—Ä–µ–∑ <a href="https://t.me/userinfobot" target="_blank">@userinfobot</a><br>
            –ò–ª–∏ —É–∫–∞–∂–∏—Ç–µ @username –∫–∞–Ω–∞–ª–∞ (–±–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–¥–º–∏–Ω–æ–º –∫–∞–Ω–∞–ª–∞)<br>
            <strong>‚ö†Ô∏è –í–ê–ñ–ù–û:</strong> –°–Ω–∞—á–∞–ª–∞ –Ω–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ "Start"!
          </p>
        </div>

        <button id="testTelegramBtn" class="button button-secondary">
          üß™ –¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        </button>
      </div>

      <div class="divider"></div>

      <!-- Notification Settings -->
      <div class="section">
        <h2 class="section-title">üîî –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h2>
        
        <div class="checkbox-group">
          <input type="checkbox" id="notifyMRComments" class="checkbox" />
          <label for="notifyMRComments" class="checkbox-label">
            –£–≤–µ–¥–æ–º–ª—è—Ç—å –æ –Ω–æ–≤—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –≤ Merge Requests
          </label>
        </div>

        <div class="checkbox-group">
          <input type="checkbox" id="notifyPipelines" class="checkbox" />
          <label for="notifyPipelines" class="checkbox-label">
            –£–≤–µ–¥–æ–º–ª—è—Ç—å –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ –ø–∞–π–ø–ª–∞–π–Ω–æ–≤
          </label>
        </div>

        <div class="checkbox-group">
          <input type="checkbox" id="showBrowserNotifications" class="checkbox" />
          <label for="showBrowserNotifications" class="checkbox-label">
            –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –±—Ä–∞—É–∑–µ—Ä–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
          </label>
        </div>

        <div class="checkbox-group">
          <input type="checkbox" id="notifyOwnComments" class="checkbox" />
          <label for="notifyOwnComments" class="checkbox-label">
            –ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–≤–æ–∏—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö
          </label>
        </div>

        <div class="form-group">
          <label for="checkInterval" class="form-label">–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ (–º–∏–Ω—É—Ç—ã)</label>
          <input
            type="number"
            id="checkInterval"
            class="form-input"
            min="1"
            max="60"
            value="2"
          />
          <p class="form-hint">–ö–∞–∫ —á–∞—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å GitLab –Ω–∞ –Ω–æ–≤—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–æ—Ç 1 –¥–æ 60 –º–∏–Ω—É—Ç)</p>
        </div>
      </div>

      <div class="divider"></div>

      <!-- Save Settings -->
      <div class="button-group">
        <button id="saveBtn" class="button button-primary">
          üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
        </button>
        <button id="resetBtn" class="button button-secondary">
          üîÑ –°–±—Ä–æ—Å–∏—Ç—å –∫ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º
        </button>
      </div>
    </div>

    <!-- Alerts (Fixed Position) -->
    <div id="alertSuccess" class="alert alert-success"></div>
    <div id="alertError" class="alert alert-error"></div>
    <div id="alertInfo" class="alert alert-info"></div>

    <div class="footer">
      GitLab Notifier | –°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è by Yana Chlene
    </div>
  </div>

  <script src="./options.js" type="module"></script>
</body>
</html>


